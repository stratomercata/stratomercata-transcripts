# ==============================================================================
# Common Packages - For All Hardware Types
# ==============================================================================
#
# These packages work with any PyTorch installation (NVIDIA GPU or CPU)
# Install AFTER installing PyTorch from requirements-nvidia.txt or requirements-cpu.txt
#
# Note: This file is included in hardware-specific lock files:
#   - requirements-nvidia-lock.txt (NVIDIA GPU systems)
#   - requirements-cpu-lock.txt (CPU-only systems)
#
# ==============================================================================

# WhisperX (latest git) - PyPI version 3.7.4 outdated, needs patches for pyannote.audio 4.0.1
# Pulls in faster-whisper, transformers, ctranslate2, and pyannote.audio 3.x (which we upgrade later)
whisperx @ git+https://github.com/m-bain/whisperx.git

# SpeechBrain (latest git) - Using git version for latest features and compatibility
# PyPI version 1.0.3 requires torch>=1.9 (compatible with 2.10+)
# Git version ensures compatibility with latest WhisperX/pyannote.audio updates
# Pulls in torch-audiomentations, torchaudio-augmentations
#
# WHEN TO SWITCH TO STABLE PyPI VERSION:
# - When a newer PyPI version (>1.0.3) is released with features we need
# - After verifying compatibility with our PyTorch nightly and pyannote.audio 4.0.1+
# - For production deployments requiring version pinning for reproducibility
# - Replace with: speechbrain>=X.Y.Z (where X.Y.Z is the verified stable version)
speechbrain @ git+https://github.com/speechbrain/speechbrain.git

# NOTE: pyannote.audio is NOT listed here to avoid version conflicts
# WhisperX requires pyannote.audio<4.0.0, but we need 4.0.1+ for PyTorch 2.10+ compatibility
# The install_packages_and_venv.sh script handles this by:
#   1. Installing these packages (WhisperX pulls in pyannote.audio 3.x)
#   2. Applying WhisperX patches to work with pyannote.audio 4.0.1
#   3. Upgrading to pyannote.audio 4.0.1 after patches applied
# Manual install: pip install --upgrade pyannote.audio after applying patches
