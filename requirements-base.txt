# ==============================================================================
# Common Packages - For All Hardware Types
# ==============================================================================
#
# These packages work with any PyTorch installation (NVIDIA GPU or CPU)
# Install AFTER installing PyTorch from requirements-nvidia.txt or requirements-cpu.txt
#
# Note: This file is included in hardware-specific lock files:
#   - requirements-nvidia-lock.txt (NVIDIA GPU systems)
#   - requirements-cpu-lock.txt (CPU-only systems)
#
# ==============================================================================

# WhisperX 3.7.4 - Using PyPI version for reproducibility and faster installs
# NOTE: WhisperX has restrictive dependency constraints that conflict with our needs:
#   - Requires torch~=2.8.0 (we need 2.10+ for RTX 5070 Blackwell support)
#   - Requires pyannote-audio<4.0.0 (we need 4.0.1+ for PyTorch 2.10+ compatibility)
# These conflicts are handled by install_packages_and_venv.sh:
#   1. Install PyTorch 2.10+ first (before WhisperX)
#   2. Install WhisperX (pulls in pyannote 3.x, tries to downgrade PyTorch)
#   3. Apply code patches to WhisperX for pyannote 4.0.1 compatibility
#   4. Force-reinstall PyTorch 2.10+ (step 7.6 in script)
#   5. Upgrade to pyannote-audio 4.0.1+ (step 7.5 in script)
# Pulls in faster-whisper, transformers, ctranslate2, and other dependencies
whisperx==3.7.4

# SpeechBrain 1.0.3 - Using PyPI version for reproducibility and faster installs
# Requires torch>=1.9 (fully compatible with PyTorch 2.10+ nightly)
# Latest stable PyPI version as of Nov 2024
# Pulls in torch-audiomentations, torchaudio-augmentations
speechbrain==1.0.3

# NOTE: pyannote.audio is NOT listed here to avoid version conflicts
# WhisperX requires pyannote.audio<4.0.0, but we need 4.0.1+ for PyTorch 2.10+ compatibility
# The install_packages_and_venv.sh script handles this by:
#   1. Installing these packages (WhisperX pulls in pyannote.audio 3.x)
#   2. Applying WhisperX patches to work with pyannote.audio 4.0.1
#   3. Upgrading to pyannote.audio 4.0.1 after patches applied
# Manual install: pip install --upgrade pyannote.audio after applying patches
